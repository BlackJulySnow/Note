---
title: 线段树
tags: 数据结构,模板,线段树
grammar_cjkRuby: true
---


线段树简单运用

```cpp?linenums
#include<cstdio>
#define MAXN 100005
#define min(a,b) (a < b ? a : b)
#define INF 0x3f3f3f3f
typedef long long ll;
int read(){
	char c = getchar();
	bool flag = true;
	while(c < '0' || '9' < c){
		if(c == '-')
			flag = false;
		c = getchar();
	}
	int x = 0;
	while('0' <= c && c <= '9'){
		x = 10 * x + c - '0';
		c = getchar();
	}
	return flag ? x : -x;
}
int n,m;
ll a[MAXN],minv[MAXN << 2];

void pushup(int o){
	minv[o] = min(minv[o << 1] , minv[(o << 1) + 1]);
}
int ql,qr;
ll query(int o,int L,int R){
	if(ql <= L && R <= qr)
		return minv[o];
	int M = (L + R) >> 1;
	ll ans = INF;
	if(ql <= M)
		ans = min(ans,query(o << 1,L,M));
	if(M < qr)
		ans = min(ans,query((o << 1) + 1,M + 1,R));
	return ans;
}

int p,v;
void change(int o,int L,int R){
	if(L == R)
		minv[o] = v;
	else{
		int M = (L + R) >> 1;
		if(p <= M)
			change(o << 1,L,M);
		if(M < p)
			change((o << 1) + 1,M + 1,R);
		pushup(o);
	}
}

int main(){
	n = read();
	m = read();
	for(int i = 1;i <= n;i++){
		p = i;v = read();
		change(1,1,n);
	}
	for(int i = 1;i <= m;i++){
		ql = read();
		qr = read();
		printf("%d ",query(1,1,n));
	}
	return 0;
} 
```