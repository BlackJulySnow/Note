---
title: 2018-10-16树状数组
tags: 数据结构,模板
grammar_cjkRuby: true
---


```csharp?linenums
#include<cstdio>
#define MAXN 500005
#define lowbit(x) (x & -x)
int read(){
	char c = getchar();
	bool flag = true;
	while(c < '0' || '9' < c){
		if(c == '-')
			flag = false;
		c = getchar();
	}
	int x = 0;
	while('0' <= c && c <= '9'){
		x = 10 * x + c - '0';
		c = getchar();
	}
	return flag ? x : -x;
}
int n,m,c[MAXN];
int buf[15];
void printf(int x){
	buf[0] = 0;
	if(x == 0){
		buf[0] = 1;
	}else{
		if(x < 0){
			putchar('-');
			x = -x;
		}
		while(x){
			buf[++buf[0]] = x % 10;
			x /= 10;
		}
	}
	for(int i = buf[0];i;i--)
		putchar(buf[i] + '0');
	puts("");
}
void add(int x,int k){
	while(x <= n){
		c[x] += k;
		x += lowbit(x);
	}
}

int find(int x){
	int ans = 0;
	while(x > 0){
		ans += c[x];
		x -= lowbit(x);
	}
	return ans;
}

int main(){
	n = read();
	m = read();
	for(int i = 1;i <= n;i++){
		int k = read();
		add(i,k);
	}
	for(int i = 1;i <= m;i++){
		int op = read();
		int a = read();
		int b = read();
		if(op == 1){
			add(a,b);
		}else{
			printf(find(b) - find(a - 1));
		}
	}
	return 0;
}
```